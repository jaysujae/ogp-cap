{{ define "post_list" }}

<head>
  <style>
    .gradient-custom {
      /* fallback for old browsers */
      background: #fccb90;

      /* Chrome 10-25, Safari 5.1-6 */
      background: -webkit-linear-gradient(
        to bottom right,
        rgba(252, 203, 144, 1),
        rgba(213, 126, 235, 1)
      );

      /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
      background: linear-gradient(149deg, #8eb9d1 0%, #ffe5ff 100%);
    }

    .mask-custom {
      background: rgba(24, 24, 16, 0.2);
      border-radius: 2em;
      backdrop-filter: blur(15px);
      border: 2px solid rgba(255, 255, 255, 0.05);
      background-clip: padding-box;
      box-shadow: 10px 10px 10px rgba(46, 54, 68, 0.03);
    }
  </style>
</head>
<body>
  <section class="gradient-custom">
    <div class="container py-5">
      <div class="row">
        <div class="col-md-6 col-lg-5 col-xl-5 mb-4 mb-md-0">
          <h5 class="font-weight-bold mb-3 text-center text-white">
            My ChatLah Mates
          </h5>

          <div class="card mask-custom">
            <div class="card-body">
              <ul class="list-unstyled mb-0">
                {{ range .Yield.Companions }}
                <li
                  class="p-2 border-bottom"
                  style="
                    border-bottom: 1px solid rgba(255, 255, 255, 0.3) !important;
                  "
                >
                  <a
                    href="/user/{{ .ID }}"
                    class="d-flex justify-content-between link-light"
                  >
                    <div class="d-flex flex-row">
                      <img
                        src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-8.webp"
                        alt="avatar"
                        class="rounded-circle d-flex align-self-center me-3 shadow-1-strong"
                        width="60"
                      />
                      <div class="pt-1">
                        <p class="fw-bold text-white mb-0">{{ .Nickname }}</p>
                        <p class="small text-white">{{ .Introduction }}</p>
                      </div>
                    </div>
                  </a>
                </li>
                {{ end }}
              </ul>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-7 col-xl-7">
          <ul class="list-unstyled text-white">
            {{ range .Yield.Chats }} {{ if eq .Role "user" }}
            <div style="height: 60vh; overflow-x: hidden; overflow-y: auto">
              <li class="d-flex justify-content mb-4">
                <img
                  src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-6.webp"
                  alt="avatar"
                  class="rounded-circle d-flex align-self-start me-3 shadow-1-strong"
                  width="60"
                />

                <div class="card mask-custom">
                  <div
                    class="card-header d-flex justify-content-between p-3"
                    style="border-bottom: 1px solid rgba(255, 255, 255, 0.3)"
                  >
                    <p class="fw-bold mb-0">{{ .User.Nickname }}</p>
                    <p class="text-light small mb-0">
                      <i class="far fa-clock"></i> 12 mins ago
                    </p>
                  </div>
                  <div class="card-body">
                    <p class="mb-0">{{ .Content }}</p>
                    <div class="d-flex justify-content-center row">
                      <div class="col-md-8">
                        <div class="d-flex flex-column comment-section">
                          {{ range .Comments }}
                          <div class="p-2">
                            <div class="d-flex flex-row user-info">
                              <img
                                class="rounded-circle"
                                src="https://i.imgur.com/RpzrMR2.jpg"
                                width="40"
                              />
                              <div
                                class="d-flex flex-column justify-content-start ml-2"
                              >
                                <span class="d-block font-weight-bold name"
                                  >Marry Andrews</span
                                >
                              </div>
                            </div>
                            <div class="mt-2">
                              <p class="comment-text">{{ .Content }}</p>
                            </div>
                          </div>
                          {{ end }}

                          <form action="/comment/{{ .ID }}" method="post">
                            <div class="p-2">
                              <div class="d-flex flex-row align-items-start">
                                <img
                                  class="rounded-circle"
                                  src="https://i.imgur.com/RpzrMR2.jpg"
                                  width="40"
                                />
                                <textarea
                                  name="content"
                                  class="form-control ml-1 shadow-none textarea"
                                ></textarea>
                              </div>
                              <div class="mt-2 text-right">
                                <button
                                  class="btn btn-primary btn-sm shadow-none"
                                  type="submit"
                                >
                                  Post comment
                                </button>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              {{ else }}
              <li class="d-flex justify-content mb-4">
                <div class="card mask-custom w-100">
                  <div
                    class="card-header d-flex justify-content-between p-3"
                    style="border-bottom: 1px solid rgba(255, 255, 255, 0.3)"
                  >
                    <p class="fw-bold mb-0">ChatLah</p>
                    <p class="text-light small mb-0">
                      <i class="far fa-clock"></i> 13 mins ago
                    </p>
                  </div>
                  <div class="card-body">
                    <p class="mb-0">{{ .Content }}</p>
                    <div class="d-flex justify-content-center row">
                      <div class="col-md-8">
                        <div class="d-flex flex-column comment-section">
                          {{ range .Comments }}
                          <div class="p-2">
                            <div class="d-flex flex-row user-info">
                              <img
                                class="rounded-circle"
                                src="https://i.imgur.com/RpzrMR2.jpg"
                                width="40"
                              />
                              <div
                                class="d-flex flex-column justify-content-start ml-2"
                              >
                                <span class="d-block font-weight-bold name"
                                  >Marry Andrews</span
                                >
                              </div>
                            </div>
                            <div class="mt-2">
                              <p class="comment-text">{{ .Content }}</p>
                            </div>
                          </div>
                          {{ end }}

                          <form action="/comment/{{ .ID }}" method="post">
                            <div class="p-2">
                              <div class="d-flex flex-row align-items-start">
                                <img
                                  class="rounded-circle"
                                  src="https://i.imgur.com/RpzrMR2.jpg"
                                  width="40"
                                />
                                <textarea
                                  name="content"
                                  class="form-control ml-1 shadow-none textarea"
                                ></textarea>
                              </div>
                              <div class="mt-2 text-right">
                                <button
                                  class="btn btn-primary btn-sm shadow-none"
                                  type="submit"
                                >
                                  Post comment
                                </button>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <img
                  src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-5.webp"
                  alt="avatar"
                  class="rounded-circle d-flex align-self-start ms-3 shadow-1-strong"
                  width="60"
                />
              </li>
              {{ end }} {{ end }}
            </div>
            <form action="/post" method="post">
              <li class="mb-3">
                <div class="form-outline form-white">
                  <textarea
                    name="post"
                    class="form-control"
                    id="textAreaExample3"
                    rows="4"
                  ></textarea>
                </div>
              </li>
              <button
                type="submit"
                class="btn btn-light btn-lg btn-rounded float-end"
              >
                Send
              </button>
            </form>
          </ul>
        </div>
      </div>
    </div>
  </section>
  <!-- End Hero -->
</body>
{{ end }}
